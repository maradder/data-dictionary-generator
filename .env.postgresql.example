# ==============================================================================
# Data Dictionary Generator - PostgreSQL Configuration
# ==============================================================================
# Advanced configuration for production deployments requiring PostgreSQL
# Use this if you need: concurrent access, large datasets, production scaling
# ==============================================================================

# Database Configuration
# Note: Database type is auto-detected from the URL
# SECURITY: Change the password before deploying to production!
DATABASE_URL=postgresql://ddgen_user:CHANGE_THIS_PASSWORD@localhost:5432/data_dictionary_db

# Alternative: Use environment variables for credentials (recommended for Docker)
# POSTGRES_USER=ddgen_user
# POSTGRES_PASSWORD=your_secure_password_here
# POSTGRES_DB=data_dictionary_db
# DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:5432/${POSTGRES_DB}

# PostgreSQL-specific Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_ECHO=false

# Application Environment
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# Server Configuration
HOST=0.0.0.0
PORT=8000
RELOAD=false

# Security
SECRET_KEY=change-this-to-a-random-secret-key-in-production
API_KEY_ENABLED=false

# OpenAI Integration (for AI-powered field descriptions)
# For LM Studio or other OpenAI-compatible servers, set OPENAI_BASE_URL
OPENAI_BASE_URL=http://192.168.1.148:1234/v1
OPENAI_API_KEY=lm-studio  # LM Studio accepts any non-empty key
OPENAI_MODEL=gpt-4  # Use the model name from LM Studio
OPENAI_MAX_TOKENS=500
OPENAI_TEMPERATURE=0.7
OPENAI_ENABLED=true

# OpenAI Timeout Settings
OPENAI_REQUEST_TIMEOUT=60
OPENAI_CONNECTION_TIMEOUT=10

# OpenAI Cache Settings
OPENAI_CACHE_ENABLED=true
OPENAI_CACHE_TTL=3600
OPENAI_CACHE_MAX_SIZE=10000

# OpenAI Retry & Rate Limiting
OPENAI_MAX_RETRY_ATTEMPTS=3
OPENAI_RETRY_MULTIPLIER=2.0
OPENAI_RETRY_MIN_WAIT=4
OPENAI_RETRY_MAX_WAIT=30
OPENAI_MAX_CONCURRENT_REQUESTS=10
OPENAI_RATE_LIMIT_RPM=60

# OpenAI Cost Tracking
OPENAI_METRICS_ENABLED=true

# File Processing
MAX_FILE_SIZE_MB=500
MAX_RECORDS_TO_ANALYZE=10000
SAMPLE_SIZE=100

# XML Processing
XML_MAX_DEPTH=10
XML_STRIP_NAMESPACES=true
XML_ATTRIBUTE_PREFIX=@

# XML Security & Performance
XML_PARSE_TIMEOUT=60  # Timeout for XML parsing operations (seconds)
XML_VALIDATION_TIMEOUT=30  # Timeout for XSD validation (seconds)
XML_MAX_FILE_SIZE_MB=100  # Maximum XML file size to accept
XML_ALLOW_EXTERNAL_ENTITIES=false  # Security: block XXE attacks
XML_ALLOW_NETWORK_ACCESS=false  # Security: block SSRF attacks

# Export Settings
EXCEL_MAX_ROWS=1048576
EXPORT_TEMP_DIR=/tmp/data-dict-exports

# Redis Configuration (optional - for caching)
REDIS_URL=redis://localhost:6380/0
REDIS_CACHE_TTL=3600

# Rate Limiting (optional)
RATE_LIMIT_ENABLED=false
RATE_LIMIT_PER_MINUTE=60

# Monitoring (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
METRICS_ENABLED=false

# Email Notifications (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@datadictgen.com

# Background Jobs (optional - for async processing)
CELERY_BROKER_URL=redis://localhost:6380/1
CELERY_RESULT_BACKEND=redis://localhost:6380/2
